<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MWZ Exfil Cooldown Calculator</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#0f1115; color:#eaeaea; padding:24px; }
    .card { max-width:660px; margin:auto; background:#171a21; padding:20px; border-radius:14px; box-shadow:0 8px 24px rgba(0,0,0,.35); }
    h1 { margin:0 0 12px; font-size:22px; text-align:center; }
    label { display:block; margin-top:14px; font-weight:600; }
    input { width:100%; padding:12px; border-radius:10px; border:1px solid #2a2f3a; background:#0f1319; color:#eaeaea; }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .muted { color:#9aa3b2; font-size:13px; text-align:center; }
    .result { margin-top:16px; padding:14px; background:#0f1319; border:1px solid #2a2f3a; border-radius:10px; }
    .accent { color:#39ff14; font-weight:700; }
    .logo img { max-width:200px; display:block; margin:0 auto 16px; border-radius:12px; }

    /* Mobile stacking */
    @media (max-width: 640px) {
      .row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="card">

    <div class="logo">
      <!-- Make sure this file exists in the repo root and name matches exactly -->
      <img src="Plaguesmwzserver.png" alt="Plague's Server Logo">
    </div>

    <h1>MWZ Exfil Cooldown Calculator</h1>
    <p class="muted">Rule of thumb: <b>240 essence = 1 minute</b> of cooldown reduction.</p>

    <div class="row">
      <div>
        <label for="essence">Essence → Time</label>
        <input id="essence" type="number" inputmode="numeric" placeholder="e.g. 7200" />
        <div id="timeOut" class="result">Enter essence to see time.</div>
      </div>
      <div>
        <label for="time">Time (minutes or HH:MM) → Essence</label>
        <input id="time" type="text" inputmode="numeric" pattern="^\\d+$|^\\d{1,2}:\\d{2}$" placeholder="e.g. 30 or 1:30" />
        <div id="essOut" class="result">Enter time to see essence.</div>
      </div>
    </div>
  </div>

  <script>
    const EPM = 240; // essence per minute

    const essence = document.getElementById('essence');
    const time = document.getElementById('time');
    const timeOut = document.getElementById('timeOut');
    const essOut = document.getElementById('essOut');

    function minutesToHMS(mins) {
      const s = Math.round(mins * 60);
      const h = Math.floor(s/3600), m = Math.floor((s%3600)/60), sec = s%60;
      if (h > 0) return `${h}h ${m}m ${sec}s`;
      if (m > 0) return `${m}m ${sec}s`;
      return `${sec}s`;
    }

    function parseTimeToMinutes(str) {
      if (!str) return NaN;
      const trimmed = str.trim();
      if (/^\d+$/.test(trimmed)) return +trimmed; // plain minutes
      const parts = trimmed.split(':').map(Number);
      if (parts.length === 2 && parts.every(n => Number.isFinite(n))) {
        const [a, b] = parts;
        if (b >= 0 && b < 60) return a * 60 + b; // HH:MM or MM:SS treated as minutes
      }
      return NaN;
    }

    essence.addEventListener('input', () => {
      const e = +essence.value;
      if (e > 0) {
        const mins = e / EPM;
        timeOut.innerHTML = `<span class="accent">${e.toLocaleString()}</span> essence ≈ <span class="accent">${minutesToHMS(mins)}</span> reduction`;
      } else {
        timeOut.textContent = 'Enter essence to see time.';
      }
    });

    time.addEventListener('input', () => {
      const t = parseTimeToMinutes(time.value);
      if (!isNaN(t) && t > 0) {
        const needed = Math.round(t * EPM);
        essOut.innerHTML = `<span class="accent">${t} min</span> reduction ≈ <span class="accent">${needed.toLocaleString()} essence</span>`;
      } else {
        essOut.textContent = 'Enter time (minutes or HH:MM) to see essence.';
      }
    });
  </script>
</body>
</html>
